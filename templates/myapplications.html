{% extends 'base.html' %}
{% block title %}My Applications!{% endblock %}
{% block head %} <link rel="stylesheet" href="/static/css/style.css"> {% endblock %}

{% block body %}
  <nav class="navbar navbar-light p-3 navbar-expand" style="background-color: #e3f2fd;">
    <div class="container">
      <a href="" class="navbar-brand">Navigation</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a href="/myhomepage" class="nav-link">Go back to homepage!</a>
          </li>
          
          <li class="nav-item">
            <a href="/allproperties" class="nav-link">Recently Viewed</a>
          </li>

          <li class="nav-item">
            <a href="/{{user.user_id}}/myfavorites" class="nav-link">Favorites</a>
          </li>

          <li class="nav-item">
            <a href="/{{user.user_id}}/myapplications" class="nav-link">Applications</a>
          </li>

          <li class="nav-item">
            <a href="/log_out" class="nav-link">Log out</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <h1>Applied!</h1>

  <div class="p-5">
    <div class="container">
    <div class="row">
    {% for each_property in applied_properties %}

    <div class="col-lg">
      <div class="card shadow-lg" style="width: 18rem;">
        <div class="card-body">
        <a href="/properties/{{each_property.theproperty.property_id}}" target="_blank">{{each_property.theproperty.address}}</a>
          <p class="card-text">The card's content.</p> 
          <p id="propertyid-filed">{{each_property.theproperty.property_id}}</p>
          <div class="bd-placeholder-img card-img-top" id="photo-container">
            <img src="{{each_property.theproperty.photo_path}}"  height="200" width="250" class="img-thumbnail">
          </div>
          <form id="add-favorite-form" method="post" action="/add-to-favorites">
            {% if each_property.theproperty.property_id not in all_liked_properties_id %}
            <button type="submit" value="{{each_property.theproperty.property_id}}" class="btn btn-primary bi bi-heart" id="like-button">  
            </button>
            {% else %}
            <button type="submit" value="{{each_property.theproperty.property_id}}" class="btn btn-primary bi bi-heart-fill" id="like-button">  
            </button>
            {% endif %}
            <div id="propertyid-filed">{{each_property.theproperty.property_id}}</div>
          </form>
        <!-- <a href="/apply/{{each_property.theproperty.property_id}}" class="btn btn-primary"> Apply today!</a> -->
          <i class="bi bi-envelope-check-fill">Applied</i>
        </div>
      </div>
    </div>
    {% endfor %}
    </div>
    </div>
  </div>

  <a class="btn btn-primary" href="/myhomepage">Go back to homepage!</a>

  <script src="/static/js/like.js"></script>
  <script src="/static/js/apply.js"></script>

{% endblock %}

{% block after_body %}
  
{% endblock %}