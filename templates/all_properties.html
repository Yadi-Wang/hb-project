{% extends 'base.html' %}
{% block title %}All Properties{% endblock %}
{% block head %} <link rel="stylesheet" href="/static/css/style.css"> {% endblock %}

{% block body %}
<nav class="navbar navbar-light p-3 navbar-expand" style="background-color: #e3f2fd;">
  <div class="container">
    <a href="" class="navbar-brand">Navigation</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="/myhomepage" class="nav-link">Go back to homepage!</a>
        </li>

        <li class="nav-item">
          <a href="/allproperties" class="nav-link">Recently Viewed</a>
        </li>

        <li class="nav-item">
          <a href="/{{user.user_id}}/myfavorites" class="nav-link">Favorites</a>
        </li>

        <li class="nav-item">
          <a href="/{{user.user_id}}/myapplications" class="nav-link">View my applications</a>
        </li>

        <li class="nav-item">
          <a href="/log_out" class="nav-link">Log out</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


<div class ="p-5">
  <div class ="container">
    <div class="row">
      
      {% for theproperty in properties %}
      
      <div class="col-lg">
        <div class="card shadow-lg" style="width: 18rem;">
          <img src="" alt="" class="card-img-top">
          <div class="card-body">
            <a href="/properties/{{theproperty.property_id}}" class="card-title"> {{ theproperty.address}}</a>

            <p class="card-text">The card's content.</p>
            <div class="bd-placeholder-img card-img-top" id="photo-container">
              <img src="{{theproperty.photo_path}}"  height="200" width="250" class="img-thumbnail">
            </div>
            <form id="add-favorite-form" method="post" action="/add-to-favorites">
              {% if theproperty.property_id not in all_liked_properties_id %}
              <button type="submit" value="{{theproperty.property_id}}" class="btn btn-primary bi bi-heart" id="like-button">  
              </button>
              {% else %}
              <button type="submit" value="{{theproperty.property_id}}" class="btn btn-primary bi bi-heart-fill" id="like-button">  
              </button>
              {% endif %}
              <div id="propertyid-filed">{{theproperty.property_id}}</div>
            </form>
            <a href="/apply/{{theproperty.property_id}}" class="btn btn-primary"> Apply today!</a>
          </div>
        </div>
        </div>
      
      {% endfor %}
      
    </div>
  </div>
</div>

  
  
    
  <!-- added a search bar in the page as well -->
  <div>
    <h1>Search for Properties</h1>
    <form method="GET" action="/properties/search">
      <div class="row">
        <label class="form-label above" for="search-keyword">Search Keyword</label>
        <small class="form-text text-muted">
          Leave this blank to get all properties!
        </small>

        <input
          id="search-keyword"
          class="form-control"
          type="text"
          name="keyword"
        >
      </div>

      <div class="row">
        <label class="form-label above" for="search-state">State</label>

        <input
          id="search-state"
          class="form-control"
          type="text"
          name="state"
        >
      </div>

      <div class="row">
        <label class="form-label above" for="search-city">City</label>

        <input
          id="search-city"
          class="form-control"
          type="text"
          name="city"
        >
      </div>

      <div class="row">
        <label class="form-label above" for="search-zip">Zipcode</label>

        <input
          id="search-zip"
          class="form-control"
          type="text"
          name="zipcode"
        >
      </div>

      <div class="row">
        <label class="form-label above" for="search-proptype">Property Type</label>

        <input
          id="search-proptype"
          class="form-control"
          type="checkbox"
          name="proptype"
          value="single_family">
        <label>Single-Family</label>

        <input
          id="search-proptype"
          class="form-control"
          type="checkbox"
          name="proptype"
          value="condo">
        <label>Townhouse/Condo</label>

        <input
          id="search-proptype"
          class="form-control"
          type="checkbox"
          name="proptype"
          value="multi_family">
        <label>Multi_Family</label>
      </div>
      
      <div class="row">
        <label class="form-label above" for="search-bath">Baths_min</label>
  
        <input
          list="search-bath"
          name="min_bath"
          class="form-control"
        >
        <datalist id="search-bath">
          <option value="0">
          <option value="1">
          <option value="2">
          <option value="3">
          <option value="4">
          <option value="5">
          <option value="6">
          <option value="7">
          <option value="8">
          <option value="9">
          <option value="10">
        </datalist>
      </div>
  
      <div class="row">
        <label class="form-label above" for="search-bath">Beds_min</label>
  
        <input
          list="search-bed"
          name="min_bed"
          class="form-control"
        >
        <datalist id="search-bed">
          <option value="0">
          <option value="1">
          <option value="2">
          <option value="3">
          <option value="4">
          <option value="5">
          <option value="6">
          <option value="7">
          <option value="8">
          <option value="9">
          <option value="10">
        </datalist>
      </div>
  
      <div class="row">
        <label class="form-label above" for="search-price">Max Price: $</label>
  
        <input
          id="search-price"
          class="form-control"
          type="text"
          name="maxprice"
        >
        <small>Format: 1234567, no decimal place</small>
      </div>
  
      <div class="row">
        <label class="form-label above" for="search-sqft">Min Squre Feet: </label>
  
        <input
          id="search-sqft"
          class="form-control"
          type="text"
          name="sqft_min"
        >
        <small>Format: 1234567, no decimal place</small>
      </div>
  
      <div class="row">
        <label class="form-label above" for="search-pets">Pets Allowed</label>
  
        <input
          type="checkbox"
          id="search-pets"
          name="pets"
          class="form-control"
          value="true"
        >
  
      </div>

      <div class="row mt-4">
        <div class="col-3">
          <input type="submit" value="Look for your home!" class="btn btn-primary">
        </div>
      </div>
    </form>
  </div>

  <script src="static/js/like.js"> </script>
{% endblock %}
